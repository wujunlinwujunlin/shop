{"version":3,"sources":["webpack:///./src/components/toast.vue","webpack:///./src/components/toast.vue?de4f","webpack:///./src/components/toast.vue?bf8a","webpack:///./src/views/addressedit/addressedit.vue?a600","webpack:///./src/views/addressedit/addressedit.vue","webpack:///./src/views/addressedit/addressedit.vue?0539"],"names":["class","message","props","toastdata","show","toastmessage","showtoast","setTimeout","render","__scopeId","handleBackClick","isEdit","handleSaveClick","placeholder","city","department","houseNumber","name","phone","router","back","components","toast","setup","route","id","query","result","errno","data","value"],"mappings":"uQACKA,MAAM,S,wEAAX,eAAoC,MAApC,EAAoC,eAAf,EAAAC,SAAO,M,YAId,GACVC,MAAM,CAAC,YAEE,EAAiB,WAC1B,IAAMC,EAAU,eAAS,CACjBC,MAAK,EACLC,aAAa,KAEXC,EAAY,SAACL,GACfE,EAAUC,MAAO,EACjBD,EAAUE,aAAeJ,EACzBM,YAAW,WACPJ,EAAUC,MAAO,EACjBD,EAAUE,aAAe,KACnC,MAX4B,EAaJ,eAAOF,GAA5BC,EAbyB,EAazBA,KAAKC,EAboB,EAapBA,aACb,MAAM,CAACD,OAAKC,eAAaC,c,UCjB1B,EAAOE,OAAS,EAChB,EAAOC,UAAY,kBAEJ,U,kCCRf,W,oCCAA,W,uKCCOT,MAAM,W,GAEJA,MAAM,S,GAUNA,MAAM,W,GACJA,MAAM,iB,EACT,eAA+C,QAAzCA,MAAM,wBAAuB,SAAK,G,GAOrCA,MAAM,iB,EACT,eAAmD,QAA7CA,MAAM,wBAAuB,aAAS,G,GAOzCA,MAAM,iB,EACT,eAAiD,QAA3CA,MAAM,wBAAuB,WAAO,G,GAOvCA,MAAM,iB,EACT,eAA8C,QAAxCA,MAAM,wBAAuB,QAAI,G,GAOpCA,MAAM,iB,EACT,eAA+C,QAAzCA,MAAM,wBAAuB,SAAK,G,sGA9C9C,eAsDM,MAtDN,EAsDM,CArDS,EAAAI,M,iBAAb,eAA4C,G,MAAxBH,QAAS,EAAAI,c,2CAC7B,eASM,MATN,EASM,CARJ,eAEM,OAFDL,MAAM,WAAY,QAAK,8BAAE,EAAAU,gBAAA,sBAAiB,O,eAEzC,IACN,eAAE,EAAAC,OAAM,WAAgB,MACxB,kBAGU,QAFRX,MAAM,cACL,QAAK,8BAAE,EAAAY,gBAAA,sBACT,QAEH,eAyCM,MAzCN,EAyCM,CAxCJ,eAOM,MAPN,EAOM,CANJ,E,eACA,eAIE,SAHAZ,MAAM,uBACNa,YAAY,U,qDACH,EAAAC,KAAI,K,mBAAJ,EAAAA,UAGb,eAOM,MAPN,EAOM,CANJ,E,eACA,eAIE,SAHAd,MAAM,uBACNa,YAAY,c,qDACH,EAAAE,WAAU,K,mBAAV,EAAAA,gBAGb,eAOM,MAPN,EAOM,CANJ,E,eACA,eAIE,SAHAf,MAAM,uBACNa,YAAY,Y,qDACH,EAAAG,YAAW,K,mBAAX,EAAAA,iBAGb,eAOM,MAPN,EAOM,CANJ,E,eACA,eAIE,SAHAhB,MAAM,uBACNa,YAAY,S,qDACH,EAAAI,KAAI,K,mBAAJ,EAAAA,UAGb,eAOM,MAPN,EAOM,CANJ,E,eACA,eAIE,SAHAjB,MAAM,uBACNa,YAAY,U,qDACH,EAAAK,MAAK,K,mBAAL,EAAAA,kB,4DAab,EAAsB,WAC1B,IAAMC,EAAS,iBACTT,EAAkB,WACtBS,EAAOC,QAET,MAAO,CAAED,SAAQT,oBAGJ,GACbO,KAAM,cACNI,WAAY,CAAEC,QAAA,MACdC,MAHa,WAIX,IAAMC,EAAQ,iBACRC,EAAKD,EAAME,MAAMD,GACjBX,EAAO,eAAI,IACXC,EAAa,eAAI,IACjBC,EAAc,eAAI,IAClBC,EAAO,eAAI,IACXC,EAAQ,eAAI,IAPZ,EAQoC,iBAAlCd,EARF,EAQEA,KAAMC,EARR,EAQQA,aAAcC,EARtB,EAQsBA,UARtB,EAS8B,IAA5Ba,EATF,EASEA,OAAQT,EATV,EASUA,gBAEhB,eAAa,wCAAC,0GACTe,EADS,gCAEW,eAAK,qBAAD,OAAsBA,IAFrC,OAEJE,EAFI,OAGY,KAAZ,OAANA,QAAM,IAANA,OAAA,EAAAA,EAAQC,SACJC,EAAOF,EAAOE,KACpBf,EAAKgB,MAAQD,EAAKf,KAClBC,EAAWe,MAAQD,EAAKd,WACxBC,EAAYc,MAAQD,EAAKb,YACzBC,EAAKa,MAAQD,EAAKZ,KAClBC,EAAMY,MAAQD,EAAKX,OATX,4CAcd,IAAMN,EAAc,yDAAI,yGAEnBE,EAAKgB,OACLf,EAAWe,OACXd,EAAYc,OACZb,EAAKa,OACLZ,EAAMY,MANa,gBAQpBxB,EAAU,UARU,2BAUjBmB,EAViB,iCAWG,eAAK,qBAAD,OAAsBA,GAAM,CACnDX,KAAMA,EAAKgB,MACXf,WAAYA,EAAWe,MACvBd,YAAaA,EAAYc,MACzBb,KAAMA,EAAKa,MACXZ,MAAOA,EAAMY,QAhBG,OAWZH,EAXY,OAkBI,KAAZ,OAANA,QAAM,IAANA,OAAA,EAAAA,EAAQC,QACVT,EAAOC,OAnBS,yCAsBG,eAAK,oBAAqB,CAC7CN,KAAMA,EAAKgB,MACXf,WAAYA,EAAWe,MACvBd,YAAaA,EAAYc,MACzBb,KAAMA,EAAKa,MACXZ,MAAOA,EAAMY,QA3BG,QAsBZ,EAtBY,OA6BI,KAAZ,OAAN,QAAM,IAAN,WAAQF,QACVT,EAAOC,OA9BS,4CAAJ,qDAmCpB,MAAO,CACLN,OACAC,aACAC,cACAC,OACAC,QACAd,OACAC,eACAM,SAAUc,EACVf,kBACAE,qB,UC5IN,EAAOJ,OAAS,EAChB,EAAOC,UAAY,kBAEJ","file":"js/addressedit.8f592a68.js","sourcesContent":["<template>\r\n<div class=\"toast\">{{message}}</div>\r\n</template>\r\n<script>\r\n    import { reactive ,toRefs} from '@vue/reactivity';\r\nexport default{\r\n    props:['message']\r\n}\r\nexport const usetoasteffect = ()=>{\r\n    const toastdata=reactive({\r\n            show:false,\r\n            toastmessage:''\r\n        })\r\n        const showtoast = (message)=>{\r\n            toastdata.show = true\r\n            toastdata.toastmessage = message\r\n            setTimeout(()=>{\r\n                toastdata.show = false\r\n                toastdata.toastmessage = ''\r\n    },2000)\r\n }\r\n const  {show,toastmessage} = toRefs(toastdata)\r\n return{show,toastmessage,showtoast}\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n    .toast{\r\n        position: fixed;\r\n        left: 50%;\r\n        top: 50%;\r\n        transform: translate(-50%,-50%);\r\n        padding:.1rem ;\r\n        background: rgba(0,0,0,.35);\r\n        border-radius: .05rem;\r\n        color: #323232;\r\n    }\r\n</style>","import { render } from \"./toast.vue?vue&type=template&id=563fbef2&scoped=true&bindings={\\\"message\\\":\\\"props\\\"}\"\nimport script from \"./toast.vue?vue&type=script&lang=js\"\nexport * from \"./toast.vue?vue&type=script&lang=js\"\n\nimport \"./toast.vue?vue&type=style&index=0&id=563fbef2&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-563fbef2\"\n\nexport default script","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./toast.vue?vue&type=style&index=0&id=563fbef2&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./addressedit.vue?vue&type=style&index=0&id=a643619c&lang=scss&scoped=true\"","<template>\r\n  <div class=\"wrapper\">\r\n    <toast v-if=\"show\" :message=\"toastmessage\"/>\r\n    <div class=\"title\">\r\n      <div class=\"iconfont\" @click=\"handleBackClick\">\r\n        &#xe6f2;\r\n      </div>\r\n      {{isEdit ? '编辑' : '新建'}}地址\r\n      <span\r\n        class=\"title__save\"\r\n        @click=\"handleSaveClick\"\r\n      >保存</span>\r\n    </div>\r\n    <div class=\"content\">\r\n      <div class=\"content__item\">\r\n        <span class=\"content__item__label\">所在城市：</span>\r\n        <input\r\n          class=\"content__item__input\"\r\n          placeholder=\"请输入所在城市\"\r\n          v-model=\"city\"\r\n        />\r\n      </div>\r\n      <div class=\"content__item\">\r\n        <span class=\"content__item__label\">小区/大厦/学校：</span>\r\n        <input\r\n          class=\"content__item__input\"\r\n          placeholder=\"请输入小区/大厦/学校\"\r\n          v-model=\"department\"\r\n        />\r\n      </div>\r\n      <div class=\"content__item\">\r\n        <span class=\"content__item__label\">楼号-门牌号：</span>\r\n        <input\r\n          class=\"content__item__input\"\r\n          placeholder=\"请输入楼号-门牌号\"\r\n          v-model=\"houseNumber\"\r\n        />\r\n      </div>\r\n      <div class=\"content__item\">\r\n        <span class=\"content__item__label\">收货人：</span>\r\n        <input\r\n          class=\"content__item__input\"\r\n          placeholder=\"请输入收货人\"\r\n          v-model=\"name\"\r\n        />\r\n      </div>\r\n      <div class=\"content__item\">\r\n        <span class=\"content__item__label\">联系电话：</span>\r\n        <input\r\n          class=\"content__item__input\"\r\n          placeholder=\"请输入联系电话\"\r\n          v-model=\"phone\"\r\n        />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { onBeforeMount, ref } from 'vue';\r\nimport { useRouter, useRoute } from 'vue-router';\r\nimport { post } from '../../utils/request';\r\nimport toast, { usetoasteffect } from '../../components/toast';\r\n\r\n// 点击回退逻辑\r\nconst useBackRouterEffect = () => {\r\n  const router = useRouter()\r\n  const handleBackClick = () => {\r\n    router.back()\r\n  }\r\n  return { router, handleBackClick }\r\n}\r\n\r\nexport default {\r\n  name: 'AddressEdit',\r\n  components: { toast },\r\n  setup() {\r\n    const route = useRoute();\r\n    const id = route.query.id;\r\n    const city = ref('');\r\n    const department = ref('');\r\n    const houseNumber = ref('');\r\n    const name = ref('');\r\n    const phone = ref('');\r\n    const { show, toastmessage, showtoast } = usetoasteffect()\r\n    const { router, handleBackClick } = useBackRouterEffect();\r\n\r\n    onBeforeMount(async () => {\r\n      if(id) {\r\n        const result = await post(`/api/user/address/${id}`)\r\n        if (result?.errno === 0) {\r\n          const data = result.data;\r\n          city.value = data.city;\r\n          department.value = data.department;\r\n          houseNumber.value = data.houseNumber;\r\n          name.value = data.name;\r\n          phone.value = data.phone;\r\n        }\r\n      }\r\n    });\r\n    \r\n    const handleSaveClick = async () => {\r\n      if(\r\n        !city.value || \r\n        !department.value || \r\n        !houseNumber.value ||\r\n        !name.value ||\r\n        !phone.value \r\n      ) {\r\n        showtoast('所有内容必填')\r\n      }else {\r\n        if(id) {\r\n          const result = await post(`/api/user/address/${id}`, {\r\n            city: city.value,\r\n            department: department.value,\r\n            houseNumber: houseNumber.value,\r\n            name: name.value,\r\n            phone: phone.value,\r\n          })\r\n          if (result?.errno === 0) {\r\n            router.back();\r\n          }\r\n        }else {\r\n          const result = await post('/api/user/address', {\r\n            city: city.value,\r\n            department: department.value,\r\n            houseNumber: houseNumber.value,\r\n            name: name.value,\r\n            phone: phone.value,\r\n          })\r\n          if (result?.errno === 0) {\r\n            router.back();\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return {\r\n      city,\r\n      department,\r\n      houseNumber,\r\n      name,\r\n      phone,\r\n      show,\r\n      toastmessage,\r\n      isEdit: !!id,\r\n      handleBackClick,\r\n      handleSaveClick,\r\n    };\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n@import  '../../style/mixins.scss';\r\n.wrapper{\r\n    position: absolute;\r\n    left: 0;\r\n    right: 0;\r\n    top: 0;\r\n    bottom: 0;\r\n    background: #fff;\r\n  }\r\n  .title{\r\n      position: relative;\r\n      font-size: 0.16rem;\r\n      background: #fff;\r\n      color: #333;\r\n      line-height: 0.44rem;\r\n      text-align: center;\r\n      &__save{\r\n        position: absolute;\r\n        right: .18rem;\r\n        font-size: .14rem;\r\n        a{\r\n          text-decoration: none;\r\n          color: #333;\r\n        }\r\n      }\r\n     .iconfont{\r\n      position: absolute;\r\n    left: .1rem;\r\n    width: .3rem;\r\n    font-size: .24rem;\r\n      color: #b6b6b6;\r\n     }\r\n  }\r\n  .content{\r\n    margin-top: .12rem;\r\n    padding: 0 .18rem ;\r\n    background: #fff;\r\n    &__item{\r\n      display: flex;\r\n      line-height: 0.44rem;\r\n      height: 0.44rem;\r\n      overflow: hidden;\r\n      border-bottom: .01rem solid #000;\r\n      &__label{\r\n        color: #333;\r\n      }\r\n      &__input{\r\n        flex: 1;\r\n        border: none;\r\n        outline: none;\r\n      }\r\n    }\r\n  }\r\n</style>\r\n","import { render } from \"./addressedit.vue?vue&type=template&id=a643619c&scoped=true&bindings={\\\"city\\\":\\\"setup\\\",\\\"department\\\":\\\"setup\\\",\\\"houseNumber\\\":\\\"setup\\\",\\\"name\\\":\\\"setup\\\",\\\"phone\\\":\\\"setup\\\",\\\"show\\\":\\\"setup\\\",\\\"toastmessage\\\":\\\"setup\\\",\\\"isEdit\\\":\\\"setup\\\",\\\"handleBackClick\\\":\\\"setup\\\",\\\"handleSaveClick\\\":\\\"setup\\\"}\"\nimport script from \"./addressedit.vue?vue&type=script&lang=js\"\nexport * from \"./addressedit.vue?vue&type=script&lang=js\"\n\nimport \"./addressedit.vue?vue&type=style&index=0&id=a643619c&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-a643619c\"\n\nexport default script"],"sourceRoot":""}